<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-unit-testing">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">Unit Testing | Dragon Game</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://chipioindustries.github.io/dragon-game/docs/unit-testing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Unit Testing | Dragon Game"><meta data-rh="true" name="description" content="As a project grows in complexity it becomes harder to thoroughly test for issues when changes are made. To solve this, test scripts are written that feed modules inputs and checks that the outputs match the expected result. These test scripts can all be run at once to test the entire game automatically."><meta data-rh="true" property="og:description" content="As a project grows in complexity it becomes harder to thoroughly test for issues when changes are made. To solve this, test scripts are written that feed modules inputs and checks that the outputs match the expected result. These test scripts can all be run at once to test the entire game automatically."><link data-rh="true" rel="icon" href="/dragon-game/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chipioindustries.github.io/dragon-game/docs/unit-testing"><link data-rh="true" rel="alternate" href="https://chipioindustries.github.io/dragon-game/docs/unit-testing" hreflang="en"><link data-rh="true" rel="alternate" href="https://chipioindustries.github.io/dragon-game/docs/unit-testing" hreflang="x-default"><link rel="stylesheet" href="/dragon-game/assets/css/styles.bb8f7dd0.css">
<link rel="preload" href="/dragon-game/assets/js/runtime~main.f47759f7.js" as="script">
<link rel="preload" href="/dragon-game/assets/js/main.b96bf504.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dragon-game/"><div class="navbar__logo"><img src="/dragon-game/img/logo.png" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/dragon-game/img/logo.png" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Dragon Game</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dragon-game/docs/dev-setup">Get Started</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/chipioindustries/dragon-game" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/dev-setup">Development Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/project-outline">Project Outline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/state-outline">State Outline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/docs-setup">Docs Development Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/remotes">Remotes System</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/dragon-game/docs/components/">UI Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Components&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/enums">Enums</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/dragon-game/docs/unit-testing">Unit Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/editing-assets">Editing Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dragon-game/docs/environment">Building the Project</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/dragon-game/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Unit Testing</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Unit Testing</h1><p>As a project grows in complexity it becomes harder to thoroughly test for issues when changes are made. To solve this, test scripts are written that feed modules inputs and checks that the outputs match the expected result. These test scripts can all be run at once to test the entire game automatically.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blind-spots">Blind Spots<a class="hash-link" href="#blind-spots" title="Direct link to heading">​</a></h2><p>Unit tests are ideal for testing self-contained, purely functional modules. However, there are weaknesses and gaps in coverage that need to be tested manually.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="side-effects">Side Effects<a class="hash-link" href="#side-effects" title="Direct link to heading">​</a></h3><p>For the most part, a test can only see the inputs it gives and the outputs it receives. If a module has side effects, these effects can be difficult to check for.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a class="hash-link" href="#networking" title="Direct link to heading">​</a></h3><p>There is currently no way to test client-sided or cross-network functionality due to the context test scripts are run in. Instead of starting a server, the place file is simply loaded into studio, and the test scripts are executed as a plugin.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-driven-development">Test-Driven Development<a class="hash-link" href="#test-driven-development" title="Direct link to heading">​</a></h2><p>Ideally, code should be written with testing in mind - there are many opportunities to design a module to make it easier to test. In fact, sometimes it&#x27;s a good idea to write the unit tests before writing the module itself.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-workflow">Testing Workflow<a class="hash-link" href="#testing-workflow" title="Direct link to heading">​</a></h2><p>The testing suite is run on every push and pull request to the repository. This workflow can take several minutes to run. I will now explain in excruciating detail how this works because I need to justify all the time I spent setting it up.</p><ul><li>The job begins by pulling the code from GitHub to test.</li><li>Foreman is installed, which also installs the rest of the toolchain.</li><li>Packages are installed with Wally.</li><li>A test RBXL file is built with Rojo.</li></ul><p>This next part goes off the rails and requires a deeper explanation: Studio requires you to log in to use it. This requires a .ROBLOSECURITY token, but this token must have originated from the same IP address the request is coming from. Because the IP address of the action runner changes every time, we need to tunnel into a self-hosted VPN with a static IP address the account cookie originated from. Insane.</p><ul><li>Download the OpenVPN client, which will be used to tunnel into a server with a static IP.</li><li>Run OpenVPN and connect using the certificate included in the repo.</li><li>Repeatedly check for when the IP successfully changes.</li><li>Make an authenticated test request to Roblox to ensure the authentication is valid.</li><li>Install and log into Roblox Studio with the authentication token.</li><li>Run the testing suite in Studio.</li><li>Take a screenshot on failure. OpenVPN puts connection errors on a GUI instead of in the console, so this is helpful in diagnosing VPN failures.</li><li>Print the test results.</li><li>Cause a failure if one of the tests failed.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/dragon-game/docs/enums"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Enums</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dragon-game/docs/editing-assets"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Editing Assets</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#blind-spots" class="table-of-contents__link toc-highlight">Blind Spots</a><ul><li><a href="#side-effects" class="table-of-contents__link toc-highlight">Side Effects</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li></ul></li><li><a href="#test-driven-development" class="table-of-contents__link toc-highlight">Test-Driven Development</a></li><li><a href="#testing-workflow" class="table-of-contents__link toc-highlight">Testing Workflow</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">External</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.roblox.com/games/9772449605" target="_blank" rel="noopener noreferrer" class="footer__link-item">Play on Roblox<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Chipio Industries. Built with Docusaurus.</div></div></div></footer></div>
<script src="/dragon-game/assets/js/runtime~main.f47759f7.js"></script>
<script src="/dragon-game/assets/js/main.b96bf504.js"></script>
</body>
</html>